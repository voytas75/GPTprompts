# Concept 2: Multi-Domain Prompt Duplication (Mirrored Library Views)

## Goal
Support browsing prompts by multiple domains/categories **even when one prompt belongs to several domains**, by allowing the prompt to appear in multiple domain folders with minimal navigation friction.

This concept intentionally introduces **multiple representations** of the same prompt across folders, and adds lightweight rules/tooling to prevent content drift.

---

## Design Principles
1. **Best-in-class browsing**: users can navigate by domain and find everything relevant there.
2. **Stable IDs**: prompt number remains the canonical identifier everywhere.
3. **Drift prevention**: if duplicates exist, enforce a single “source of truth” so duplicates don’t diverge.
4. **File-based linking**: all navigation uses file links, not mega-README anchors.
5. **Latest clean + versioned history**: the “latest” stays readable; history is preserved separately.

---

## Proposed Repository Structure

```
README.md
docs/
  techniques/
  prompt-taxonomy.md
  resources.md
prompts/
  README.md
  _source/
    032-analyze-and-improve-powershell-code/
      latest.md
      v1.md
      v2.md
    078-life-event/
      latest.md
      v1.md
  computer-science/
    032-analyze-and-improve-powershell-code.md   (mirror)
    078-life-event.md                           (mirror, if applicable)
  cybersecurity/
    032-analyze-and-improve-powershell-code.md   (mirror, if applicable)
  arts-and-humanities/
    078-life-event.md                           (mirror)
  ...
```

### What goes where
- `prompts/_source/**`: **single canonical content** per prompt ID (latest + versions).
- `prompts/<domain>/*.md`: **mirrors** for navigation. These are not edited directly.
- `prompts/README.md`: the main library index (can include both “by ID” and “by domain” views).
- `docs/prompt-taxonomy.md`: the classification map linking to mirrors (or to `_source`, see below).

---

## How Duplication Works (Three Options)

### Option A (Recommended): Generated mirror files (safe duplication)
Mirrors are generated from `_source/**/latest.md` so the content is identical everywhere.

- Pros: best browsing + no drift.
- Cons: requires a small generation step (script/CI) and a convention to mark generated files.

Mirror file content patterns:
- Either full copied content (best offline readability),
- or a short stub that links to `_source` (less duplication, but weaker “in-place” browsing).

### Option B: Symlink mirrors (minimal storage, but platform caveats)
Domain entries are symlinks pointing to `_source/**/latest.md`.

- Pros: truly single-copy, no generator.
- Cons: symlink behavior varies across OS/tools; not always friendly on Windows; some tooling doesn’t preserve symlinks.

### Option C: Manual duplication (not recommended)
You literally copy/paste prompt bodies into multiple domain files and edit them manually.

- Pros: simplest conceptually.
- Cons: high drift risk; more merge conflicts; requires strict discipline.

If you want duplication, Option A is the “best of both worlds”.

---

## Link Strategy
You can choose what taxonomy/index links point to:

1. **Link to mirrors** (best browsing by domain)
   - `docs/prompt-taxonomy.md` links to `prompts/<domain>/NNN-...md`
   - Users stay within the domain view

2. **Link to canonical source** (best “single truth” visibility)
   - `docs/prompt-taxonomy.md` links to `prompts/_source/NNN-.../latest.md`
   - Domain folders become optional shortcuts

Recommended with mirrors: **taxonomy links to mirrors**, and each mirror includes a small metadata line “Canonical source: …” for clarity.

---

## Prompt Content Format

### Canonical source file: `prompts/_source/NNN-slug/latest.md`
Structure:
1. `# NNN. Title`
2. Markdown metadata table (domain(s), tags, audience, inputs, output format, source)
3. Prompt body in a fenced block

### Version files: `prompts/_source/NNN-slug/vN.md`
Same structure as `latest.md`, optionally with a short “Changes” note at top.

### Mirror files: `prompts/<domain>/NNN-slug.md`
If generated-full-copy: identical to `latest.md` plus an “Autogenerated; edit canonical” line.
If stub-style: metadata + link to canonical + optionally a collapsed content block.

---

## Maintenance Workflow

### Adding a prompt
1. Create `prompts/_source/NNN-slug/latest.md`
2. Classify it under one or more domains (from taxonomy rules)
3. Generate mirrors into each relevant `prompts/<domain>/NNN-slug.md`
4. Update `prompts/README.md` index (or generate it)
5. Update `docs/prompt-taxonomy.md` links

### Updating a prompt (preserve history)
1. Move current `latest.md` to `vN.md`
2. Write new `latest.md`
3. Regenerate mirrors

---

## Migration Strategy (From Current Mega-README)
1. Extract technique guides into `docs/techniques/*`.
2. Extract prompt taxonomy into `docs/prompt-taxonomy.md` (keep multi-domain associations).
3. For each prompt:
   - Create `prompts/_source/NNN-slug/latest.md`
   - Add `v1.md` if you want to preserve the exact original text as history
4. Generate mirror files under every domain it appears in today.
5. Shrink root `README.md` into a navigation hub.

---

## When to Choose This Concept
Pick Concept 2 if:
- multi-domain browsing is a primary use case,
- you want a prompt to “live” in every relevant category without forcing users to jump between domains,
- you’re willing to add a tiny amount of process/tooling to avoid drift.

